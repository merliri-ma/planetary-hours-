<!DOCTYPE html>
<html>
<head>
    <title>Planetary Hours Calculator</title>
    <style>
        body { 
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .hour-block {
            border: 1px solid #ddd;
            padding: 10px;
            margin: 5px;
            display: inline-block;
            width: 150px;
        }
        .day { background-color: #f0f8ff; }
        .night { background-color: #f0f0f0; }
    </style>
</head>
<body>
    <h1>Planetary Hours Calculator</h1>
    <form id="calculator-form">
        <select id="timezone">
            <option value="UTC">UTC</option>
            <option value="America/New_York">New York</option>
            <option value="Europe/London">London</option>
            <option value="Asia/Tokyo">Tokyo</option>
        </select>
        <input type="time" id="sunrise" required>
        <input type="time" id="sunset" required>
        <select id="day">
            <option value="0">Sunday</option>
            <option value="1">Monday</option>
            <option value="2">Tuesday</option>
            <option value="3">Wednesday</option>
            <option value="4">Thursday</option>
            <option value="5">Friday</option>
            <option value="6">Saturday</option>
        </select>
        <button type="submit">Calculate</button>
    </form>
    <div id="results"></div>
    <script>
        document.getElementById('calculator-form').onsubmit = async (e) => {
            e.preventDefault();
            const response = await fetch(`/calculate?sunrise=${sunrise.value}&sunset=${sunset.value}&day_of_week=${day.value}&timezone=${timezone.value}`);
            const data = await response.json();
            displayResults(data);
        };

        function displayResults(data) {
            const results = document.getElementById('results');
            results.innerHTML = `
                <h2>Ruling Planet: ${data.date_info.ruling_planet}</h2>
                <h3>Day Hours</h3>
                ${data.hours.slice(0,12).map(hour => `
                    <div class="hour-block day">
                        <strong>${hour.time}</strong><br>
                        ${hour.planet}
                    </div>
                `).join('')}
                <h3>Night Hours</h3>
                ${data.hours.slice(12).map(hour => `
                    <div class="hour-block night">
                        <strong>${hour.time}</strong><br>
                        ${hour.planet}
                    </div>
                `).join('')}
            `;
        }
    </script>
</body>
</html>
